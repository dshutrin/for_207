{% extends 'main_app/admin_base.html' %}
{% load static %}


{% block content %}
  <div class="container p-0 my-5">
    <div class="row m-0 p-0">
      <div class="back">
        <a href="/adminka/user_list" class="text-decoration-none">
          <button type="button" class="btn btn-primary">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16">
              <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"></path>
            </svg>
            Назад
          </button>
        </a>
      </div>
    </div>

    <div class="row m-0 p-0 mt-5">
      <h3>Стол №{{table.number}}</h3>
    </div>

    <div class="row m-0 p-0 mt-3">
      <div class="col-8">
        <h4>Информация о текущем работнике:</h4>

        {% if table.user %}
          <h4 class="mt-3">{{table.user.name}} {{table.user.surname}}</h4>
          <p class="fs-4">
            <div class="row">
              <div class="card col-6 m-3 text-center" style="width: 18rem;">
                <div class="card-body text-center mt-1">
                  <h5 class="card-title text-success">{{table.user.likes}} лайк(ов)</h5>
                </div>
              </div>

              <div class="card col-6 m-3 fs-1" style="width: 18rem;">
                <div class="card-body text-center mt-1">
                  <h5 class="card-title text-danger">{{table.user.dislikes}} дизлайк(ов)</h5>
                </div>
              </div>
            </div>
          </p>
        {% else %}
          <h4 class="text-danger">Работник не назначен</h4>
        {% endif %}


      </div>
      <div class="col-4">
        {% if table.user %}
          <h4>Сменить работника</h4>
        {% else %}
          <h4>Назначить работника</h4>
        {% endif %}

        <div class="dropdown">
          <button class="btn btn-primary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
            {% if table.user %}
              Сменить работника
            {% else %}
              Назначить работника
            {% endif %}
          </button>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="/adminka/user_list/tables/{{table.id}}/set_worker/0">Нет работника</a></li>
            {% for worker in workers %}
              <li><a class="dropdown-item" href="/adminka/user_list/tables/{{table.id}}/set_worker/{{worker.id}}">{{worker.name}} {{worker.surname}}</a></li>
            {% endfor %}
          </ul>
        </div>

      </div>
    </div>

  </div>
{% endblock %}
